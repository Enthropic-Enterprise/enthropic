syntax = "proto3";
package enthropic.orders;
import "common.proto";

enum OrderSide { ORDER_SIDE_UNSPECIFIED = 0; ORDER_SIDE_BUY = 1; ORDER_SIDE_SELL = 2; }
enum OrderType { ORDER_TYPE_UNSPECIFIED = 0; ORDER_TYPE_MARKET = 1; ORDER_TYPE_LIMIT = 2; ORDER_TYPE_STOP = 3; ORDER_TYPE_STOP_LIMIT = 4; }
enum OrderStatus { ORDER_STATUS_UNSPECIFIED = 0; ORDER_STATUS_PENDING = 1; ORDER_STATUS_PARTIALLY_FILLED = 2; ORDER_STATUS_FILLED = 3; ORDER_STATUS_CANCELLED = 4; ORDER_STATUS_REJECTED = 5; ORDER_STATUS_EXPIRED = 6; }
enum TimeInForce { TIME_IN_FORCE_UNSPECIFIED = 0; TIME_IN_FORCE_GTC = 1; TIME_IN_FORCE_IOC = 2; TIME_IN_FORCE_FOK = 3; TIME_IN_FORCE_DAY = 4; }

message Order {
  string id = 1;
  string account_id = 2;
  string client_order_id = 3;
  string symbol = 4;
  OrderSide side = 5;
  OrderType order_type = 6;
  enthropic.common.Decimal quantity = 7;
  enthropic.common.Decimal price = 8;
  enthropic.common.Decimal stop_price = 9;
  enthropic.common.Decimal filled_quantity = 10;
  enthropic.common.Decimal avg_fill_price = 11;
  OrderStatus status = 12;
  TimeInForce time_in_force = 13;
  enthropic.common.Timestamp created_at = 14;
  enthropic.common.Timestamp updated_at = 15;
}

message NewOrderRequest {
  enthropic.common.AuthContext auth = 1;
  string client_order_id = 2;
  string symbol = 3;
  OrderSide side = 4;
  OrderType order_type = 5;
  enthropic.common.Decimal quantity = 6;
  enthropic.common.Decimal price = 7;
  enthropic.common.Decimal stop_price = 8;
  TimeInForce time_in_force = 9;
}

message OrderResult {
  oneof result {
    Order accepted = 1;
    OrderRejection rejected = 2;
    Order duplicate = 3;
  }
}

message OrderRejection { string reason = 1; string code = 2; }
message CancelOrderRequest { enthropic.common.AuthContext auth = 1; string order_id = 2; }
message CancelOrderResult { bool success = 1; string error_message = 2; Order cancelled_order = 3; }
message GetOrderRequest { enthropic.common.AuthContext auth = 1; string order_id = 2; }
message GetOpenOrdersRequest { enthropic.common.AuthContext auth = 1; string symbol = 2; }
message OrderList { repeated Order orders = 1; }
